## Overview

Buffer overflow is the most common vulnerability found in sofware applications that can lead to arbitrary code execution and more. These are caused usually due to the use of insecure functions that do not check bounds. In this PoC I have demostrated how an attacker can exploit the buffer overflow vulnerability when the application uses insecure functions such as gets.

## Build
```
gcc -o main main.c
```

## Disable ASLR
ASLR (Address space layout randomization) is a security technique that allows the operating system to shuffle the the address space positions of key data areas of a process, including the base of the executable and the positions of the stack, heap and libraries. This is an effective method again bufferoverflow and is enabled by default. Therefore we need to disable it using the following technique

```
echo 0 | sudo tee /proc/sys/kernel/randomize_va_space
```

Also ensure that you do not compile with gcc flag `-fstack-protector` that inserts a stack canary to detect the execution of buffer overflows. An interesting talk about the lifecycle of how security features can be found [here](https://www.youtube.com/watch?v=WtlC2GaoFf8).

## Steps
After compiling, and disabling ASLR

1. use `gdb ./main` and `info address hook` to find the address of hook function. 
2. Then try to prepare a payload in such a way that the buffer in test2 is overflowed and the return address on the stack is overwritten with the address of the hook function.

Example:
```
┌──(kali㉿kali)-[~/Desktop/research]
└─$ ./main                                               
AAAAAAAAAABBBBCCCCCC00iQUUUU
Test value is: 5
exploited buffer overflow vulnerability
```

## More information
[-fstack-protector](https://developers.redhat.com/articles/2022/06/02/use-compiler-flags-stack-protection-gcc-and-clang): A stack canary is the most rudimentary check for buffer overflows on the stack. The canary is an extra word of memory at the end of the stack frame with a value set at runtime. This value is presumably unknown to the attacker and checked for modification before jumping out of the function. A modification indicates the detection of a stack smashing followed by a termination routine.
